{% extends "base.html" %}
{% block content %}
<h1 class="text-2xl font-bold">Profilo</h1>

<form method="post" action="/profile" class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6" onsubmit="showOverlay()">
  <label class="block">
    <span class="text-sm font-medium">Nome</span>
    <input type="text" name="first_name" value="{{ profile.first_name }}" class="mt-1 w-full rounded-lg border-gray-300 focus:ring-2 focus:ring-indigo-600">
  </label>
  <label class="block">
    <span class="text-sm font-medium">Cognome</span>
    <input type="text" name="last_name" value="{{ profile.last_name }}" class="mt-1 w-full rounded-lg border-gray-300 focus:ring-2 focus:ring-indigo-600">
  </label>
  <label class="block md:col-span-2">
    <span class="text-sm font-medium">Ruolo</span>
    <input type="text" name="role" value="{{ profile.role }}" class="mt-1 w-full rounded-lg border-gray-300 focus:ring-2 focus:ring-indigo-600">
  </label>

  <div>
    <span class="text-sm font-medium">Toni (scegli più opzioni)</span>
    <div class="mt-2 grid grid-cols-2 gap-2">
      {% set tones = profile.tones or [] %}
      {% for t in ['Istituzionale','Empatico','Determinato','Tecnico','Inclusivo','Pragmatico','Trasparente','Ottimista','Energico','Sobrio','Visionario','Moderato','Riformista','Ambientalista','Europeista','Garantista','Severo','Conciliante'] %}
      <label class="flex items-center gap-2">
        <input type="checkbox" name="tones" value="{{ t }}" {% if t in tones %}checked{% endif %}>
        <span>{{ t }}</span>
      </label>
      {% endfor %}
    </div>
  </div>

  <div>
    <span class="text-sm font-medium">Canali</span>
    <div class="mt-2 grid grid-cols-2 gap-2">
      {% set channels = profile.channels or ['Social'] %}
      {% for c in ['Social','Sito','Stampa'] %}
      <label class="flex items-center gap-2">
        <input type="checkbox" name="channels" value="{{ c }}" {% if c in channels %}checked{% endif %}>
        <span>{{ c }}</span>
      </label>
      {% endfor %}
    </div>
  </div>

  <div class="md:col-span-2">
    <label class="block">
      <span class="text-sm font-medium">Altro (tono personalizzato)</span>
      <input type="text" name="tone_other" value="{{ profile.tone_other }}" placeholder="Es.: vorrei scrivessi come un sindaco vicino alla popolazione" class="mt-1 w-full rounded-lg border-gray-300 focus:ring-2 focus:ring-indigo-600">
      <p class="text-xs text-gray-500 mt-1">Esempio: “vorrei scrivessi come un sindaco vicino alla popolazione”.</p>
    </label>
  </div>

  <label class="flex items-center gap-2 md:col-span-2">
    <input type="checkbox" name="add_ai" {% if profile.add_ai %}checked{% endif %}>
    <span>Aggiungi sempre una mia dichiarazione (AI) / rielabora i testi</span>
  </label>

  <div class="md:col-span-2">
    <button class="px-4 py-2 rounded-lg bg-indigo-600 text-white font-semibold">Salva</button>
  </div>
</form>
{% endblock %}
