{% extends "base.html" %}
{% block content %}
  <section class="card max-w-3xl">
    <h2 class="text-lg font-semibold mb-3">Completa questi 4 passaggi</h2>
    <form method="post" action="/onboarding" class="space-y-4" @submit="loading=true">
      <div>
        <div class="label">1) Nome e Cognome</div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
          <input name="first_name" class="input" placeholder="Nome" value="{{ settings.first_name }}">
          <input name="last_name" class="input" placeholder="Cognome" value="{{ settings.last_name }}">
        </div>
      </div>

      <div>
        <div class="label">2) Ruolo/Titolo</div>
        <input name="role" class="input" placeholder="Sindaco, Onorevole, Consigliere…" value="{{ settings.role }}">
      </div>

      <div>
        <div class="label">3) Tono delle comunicazioni (scegline più di uno)</div>
        {% set opts = ["Istituzionale","Empatico","Energico","Inclusivo","Determinato","Conciliante","Visionario","Pragmatico","Tecnico","Vicino al territorio"] %}
        <div class="grid grid-cols-2 gap-2">
          {% for t in opts %}
          <label class="flex items-center gap-2 text-sm">
            <input type="checkbox" name="tones" value="{{ t }}" class="checkbox" {% if settings.tones and t in settings.tones %}checked{% endif %}>
            <span>{{ t }}</span>
          </label>
          {% endfor %}
        </div>
        <div class="mt-2 flex items-center gap-2">
          <span class="text-sm text-slate-600">Altro:</span>
          <input name="tone_other" class="input" value="{{ settings.tone_other }}" placeholder="es. concreto, europeista…">
        </div>
      </div>

      <div>
        <div class="label">4) Seleziona per cosa vuoi i testi</div>
        {% set L = {"facebook":"Facebook","instagram":"Instagram","x":"X (Twitter)","website":"Sito","press":"Stampa"} %}
        <div class="grid grid-cols-2 gap-2">
          {% for key,label in L.items() %}
          <label class="flex items-center gap-2 text-sm">
            <input type="checkbox" name="channels" value="{{ key }}" class="checkbox" {% if settings.channels and key in settings.channels %}checked{% endif %}>
            <span>{{ label }}</span>
          </label>
          {% endfor %}
        </div>
      </div>

      <div class="pt-2">
        <button class="btn-primary" type="submit">Vai a Upload & Genera</button>
      </div>
    </form>
  </section>
{% endblock %}
